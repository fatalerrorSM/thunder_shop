extends layout/layout

block content
    include common/header
    div(id="chartContainer" style="height: 400px; width: 100%;")
    
    script.
        $.ajax({url:`http://localhost:5000/stats`,success : function(res){
           formatRes = [];
           res.forEach(element => {
               var obj = {};

                switch(element.MONTHS){
                    case "1" : {
                        obj.MONTH = "January";
                        break;
                    }
                    case "2" : {
                        obj.MONTH = "February";
                        break;
                    }
                    case "3" : {
                        obj.MONTH = "March";
                        break;
                    }
                    case "4" : {
                        obj.MONTH = "April";
                        break;
                    }
                    case "5" : {
                        obj.MONTH = "May";
                        break;
                    }
                    case "6" : {
                        obj.MONTH = "June";
                        break;
                    }
                    case "7" : {
                        obj.MONTH = "July";
                        break;
                    }
                    case "8" : {
                        obj.MONTH = "August";
                        break;
                    }
                    case "9" : {
                        obj.MONTH = "September";
                        break;
                    }
                    case "10" : {
                        obj.MONTH = "October";
                        break;
                    }
                    case "11" : {
                        obj.MONTH = "November";
                        break;
                    }case "12" : {
                        obj.MONTH = "December";
                        break;
                    }
                }

                obj.price = parseInt(element.price);
                obj.st = true;
                formatRes.push(obj);
           })
           
           window.onload = function () {

            var chart = new CanvasJS.Chart("chartContainer", {
            animationEnabled: true,
            
            title:{
                text:"Sales statistic"
            },
            axisX:{
                interval: 1
            },
            axisY2:{
                interlacedColor: "rgba(1,77,101,.2)",
                gridColor: "rgba(1,77,101,.1)",
                title: "$"
            },
            data: [{
                type: "bar",
                name: "Months",
                axisYType: "secondary",
                color: "#014D65",
                dataPoints: [
                    formatRes[0].st ? { y: formatRes[0].price,   label: formatRes[0].MONTH } : null, 
                ]
            }]
        });
        chart.render();

        }
        }})

        